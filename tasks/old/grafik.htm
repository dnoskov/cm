<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="grafik.files/filelist.xml">
<title>Введение</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author> </o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Volena</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>6</o:TotalTime>
  <o:Created>2005-11-16T05:39:00Z</o:Created>
  <o:LastSaved>2005-11-16T05:39:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2681</o:Words>
  <o:Characters>15287</o:Characters>
  <o:Company>ivm</o:Company>
  <o:Lines>127</o:Lines>
  <o:Paragraphs>35</o:Paragraphs>
  <o:CharactersWithSpaces>17933</o:CharactersWithSpaces>
  <o:Version>10.2625</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:DoNotHyphenateCaps/>
  <w:DrawingGridHorizontalSpacing>6 пт</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>6 пт</w:DrawingGridVerticalSpacing>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:Compatibility>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:UsePrinterMetrics/>
   <w:WW6BorderRules/>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:AutoSpaceLikeWord95/>
   <w:DoNotUseHTMLParagraphAutoSpacing/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
   <w:UseWord97LineBreakingRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Times New Roman CYR";
	panose-1:2 2 6 3 5 4 5 2 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:536902279 -2147483648 8 0 511 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.a
	{mso-style-name:"Основной шрифт";
	mso-style-parent:"";}
p.DHead, li.DHead, div.DHead
	{mso-style-name:D_Head;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:18.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.DAbstract, li.DAbstract, div.DAbstract
	{mso-style-name:D_Abstract;
	mso-style-parent:Обычный;
	margin-top:12.0pt;
	margin-right:42.55pt;
	margin-bottom:12.0pt;
	margin-left:42.55pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-style:italic;
	mso-bidi-font-style:normal;}
p.DParagraf, li.DParagraf, div.DParagraf
	{mso-style-name:D_Paragraf;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:16.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.DText, li.DText, div.DText
	{mso-style-name:D_Text;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:36.0pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.DHeadComm, li.DHeadComm, div.DHeadComm
	{mso-style-name:D_HeadComm;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-weight:normal;
	font-style:italic;
	mso-bidi-font-style:normal;
	text-decoration:underline;
	text-underline:single;}
p.DComm, li.DComm, div.DComm
	{mso-style-name:D_Comm;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;
	mso-bidi-font-style:normal;}
p.DCode, li.DCode, div.DCode
	{mso-style-name:D_Code;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
p.SComm, li.SComm, div.SComm
	{mso-style-name:S_Comm;
	mso-style-parent:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;
	mso-bidi-font-style:normal;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-mirror-margins:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:2.0cm 1.0cm 70.9pt 1.0cm;
	mso-header-margin:36.0pt;
	mso-footer-margin:36.0pt;
	mso-gutter-margin:2.0cm;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-bidi-font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=RU style='tab-interval:36.0pt'>

<div class=Section1>

<p class=DParagraf><o:p>&nbsp;</o:p></p>

<p class=DParagraf><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Инструменты </span><span lang=EN-US style='mso-ansi-language:
EN-US'>Delphi</span><span lang=EN-US> </span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>для работы с графикой.<o:p></o:p></span></p>

<p class=DParagraf><o:p>&nbsp;</o:p></p>

<p class=DText><st1:place><span class=GramE><span lang=EN-US style='font-family:
 "Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
 EN-US'>Delphi</span></span></st1:place><span class=GramE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>обладает развитой графической подсистемой.</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Вообще, можно говорить о двух задачах, возникающих при
работе с графикой: это использование уже созданных (в каком либо стороннем
редакторе, например, </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Paint</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>)
графических файлов и собственно рисование (каких-либо графиков, чертежей на
основе вычисляемых значений, например). Справочная система </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Delphi</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> оперирует двумя понятиями: </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>drawing</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> и </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>painting</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> (дословно – вычерчивание или рисование
и отображение, если следовать новому большому англо-русскому словарю).
Трактуются эти понятия следующим образом. Под “вычерчиванием” подразумевается
рисование графических примитивов (линий, прямоугольников, эллипсов) на
поверхности объекта. Термин “отображение” применяют, когда говорят об
изображении объекта как целого. Например, при работе окно Вашего приложения
было перекрыто другим окном (браузером или окном помощи). Тогда при активизации
Вашего приложения его окно будет перерисовано вместе со всем содержимым –
кнопками, элементами редактирования, метками. Мы, как правило, будем
пользоваться для обозначения обоих действий словом “рисование”, если это не будет
приводить к путанице.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Возможность рисовать на поверхности объекта обеспечивается
наличием у него свойства </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Canvas</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(по-видимому, более уместен перевод “холст”, но чаще используется “канва”). Это
свойство (класса </span><span class=SpellE><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
EN-US'>TCanvas</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>) фактически инкапсулирует интерфейс
графических устройств </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Windows</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(</span><span lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman";mso-ansi-language:EN-US'>GDI</span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>, </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Graphic</span><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Device</span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Interface</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>). Из рассмотренных нами компонентов
свойство </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Canvas</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
доступное для изменения пользователем, имеет только форма. Компонент метки
также имеет свойство </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Canvas</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
но оно доступно только для чтения.</span><span style='font-size:18.0pt;
mso-bidi-font-size:10.0pt'> <o:p></o:p></span></p>

<p class=DText><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-style:normal'> </span></b>Свойства, доступные только для чтения (<span
lang=EN-US style='mso-ansi-language:EN-US'>read</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>only</span>), изменять нельзя. Если Вы
попытаетесь сделать это в программе, код не будет откомпилирован. Такие
свойства используются для получения какой-либо информации об объекте.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>На поверхности формы можно рисовать, но на практике
оказывается более удобным использовать различные компоненты-надстройки,
например, </span><span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>PaintBox</span></span><span lang=EN-US> </span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>или </span><span
lang=EN-US style='mso-ansi-language:EN-US'>Image</span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>. Они будут
рассматриваться в следующих параграфах.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Класс </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>TCanvas</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> помимо
собственно канвы (холста) содержит и инструменты рисования – перо (</span><span
lang=EN-US style='mso-ansi-language:EN-US'>Pen</span>)<span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> и кисть (</span><span
lang=EN-US style='mso-ansi-language:EN-US'>Brush</span>)<span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>. Кроме этого,
канва имеет свойство </span><span lang=EN-US style='mso-ansi-language:EN-US'>Font</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(шрифт), которое определяет, каким шрифтом будет выводиться текст на ней. С
помощью свойства </span><span lang=EN-US style='mso-ansi-language:EN-US'>Pixels</span><span
lang=EN-US> </span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Вы можете получить доступ к отдельным пикселям канвы. Это
свойство имеет тип двумерного массива с базовым типом </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>TColor</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Таким образом, </span><span lang=EN-US style='mso-ansi-language:EN-US'>Pixels</span>[0,0]<span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
возвратит Вам цвет пикселя, расположенного в верхнем левом углу канвы. Реально
Вам редко придется использовать это свойство: канва содержит множество методов,
позволяющих строить линии, дуги, эллипсы, прямоугольники, выводить текст. Вы
можете познакомиться с полным списком свойств и методов канвы с помощью
справочной системы </span><span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
В следующих параграфах некоторые из них мы обсудим подробно.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Объекты класса </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>TCanvas</span></span><span lang=EN-US> </span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>не
используются сами по себе, а являются свойством других компонентов. Но это – не
единственный путь работы с графикой. Существует еще набор классов-контейнеров,
способных содержать в себе графические изображения того или иного типа: </span><span
class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>TIcon</span></span></span><span
class=GramE> (<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>значок</span>), <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>TMetaFile</span></span><span lang=EN-US> </span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>(метафайл
</span><span lang=EN-US style='mso-ansi-language:EN-US'>Windows</span>), <span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>TBitMap</span></span><span
lang=EN-US> </span>(<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>растровое изображение), а также </span><span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>TJPEGImage</span></span> (<span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>изображение
в формате </span><span lang=EN-US style='mso-ansi-language:EN-US'>JPEG</span>),
<span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>TOleGraphic</span></span>
(<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>графический
контейнер, используемый для значков, метафайлов и растровых изображений при
работе с компонентами </span><span lang=EN-US style='mso-ansi-language:EN-US'>ActiveX</span>)<span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
Все эти классы являются прямыми потомками класса </span><span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>TGraphic</span></span>. <span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>Контейнером,
который может содержать как стандартную </span><span lang=EN-US
style='mso-ansi-language:EN-US'>Windows</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>-графику (значки, метафайлы и растровые
изображения), так и графику в формате, определенном пользователем, является
класс </span><span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>TPicture</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Этот класс имеет поле </span><span lang=EN-US style='mso-ansi-language:EN-US'>Graphic</span>
(<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>типа
</span><span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>TGraphic</span></span>)<span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
в которое помещается картинка. Здесь мы снова можем наблюдать полиморфизм в
действии: графика любого формата будет обработана корректно.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Экземпляр класса </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>TGraphic</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> создать нельзя,
а экземпляр любого из классов-потомков может быть создан стандартным образом (с
помощью конструктора) и использован самостоятельно.<o:p></o:p></span></p>

<p class=SComm><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
font-family:"Times New Roman";font-style:normal'><o:p>&nbsp;</o:p></span></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b> <span
style='mso-spacerun:yes'> </span>Класс <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>TGraphic</span></span><span lang=EN-US> </span>является
абстрактным. Впоследствии, при детальном изучении объектов и классов мы будем
обсуждать абстрактные классы. Пока достаточно понимать, что абстрактный класс
служит своего рода шаблоном, сводом правил, которым должен удовлетворять любой
конкретный класс-потомок. Определение методов и свойств (без реализации) в
абстрактном классе обеспечивает в дальнейшем возможность полиморфного
присваивания.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Так, например, Вы можете создать объект </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>BitMap</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
и использовать его для рисования вне экрана (можно сказать, на виртуальной
канве), а затем отобразить результат на экране. Этот способ полезен, если
необходимо нарисовать сложное изображение. После того, как рисунок завершен на
виртуальной канве, он просто копируется на канву реальную (в свойство </span><span
lang=EN-US style='mso-ansi-language:EN-US'>Canvas</span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> какого-либо
объекта). В результате рисунок появляется целиком, а не по частям.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>И в заключение – несколько слов о системе координат,
принятой в </span><span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Началом координат считается левый верхний угол формы (или компонента-надстройки
над свойством </span><span lang=EN-US style='mso-ansi-language:EN-US'>Canvas</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>).
Координаты </span><span lang=EN-US style='mso-ansi-language:EN-US'>X</span><span
lang=EN-US> </span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>и </span><span lang=EN-US style='mso-ansi-language:EN-US'>Y</span><span
lang=EN-US> </span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>являются целыми положительными числами, причем ось абсцисс
направлена влево, а ось ординат <span class=GramE>–в</span>низ.<o:p></o:p></span></p>

<p class=DParagraf><o:p>&nbsp;</o:p></p>

<p class=DParagraf><o:p>&nbsp;</o:p></p>

<p class=DParagraf><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Простой графический редактор и Ваши графики<o:p></o:p></span></p>

<p class=DParagraf><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Если Вы работали с </span><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
EN-US'>Windows</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>, то Вы, несомненно, хотя бы раз пытались что-нибудь
нарисовать с помощью графического редактора </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Paint</span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> </span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>(в </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Windows</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> 3.11 он назывался </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>PaintBrush</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>).
В этом параграфе мы разработаем свою (упрощенную) версию графического
редактора, а также покажем, как построить график функции.<o:p></o:p></span></p>

<p class=DText style='text-indent:0cm'><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>Поместите на форму следующие
компоненты: </span><span class=SpellE><span class=GramE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span></span><span class=GramE><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
</span><span class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>ColorGrid</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(цветовая сетка, находится на странице </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Samples</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> Палитры Компонентов), а также две
кнопки.</span></span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'> Назовите одну из кнопок “Очистить” или “</span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Clear</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>” (</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>ClearBtn</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>), а другую – “Выход” или “</span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Close</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>” (</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>CloseBtn</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>). Сначала <span class=GramE>напишем</span>
обработчик события щелчка левой клавишей мыши для кнопки </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>CloseBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
поскольку он идеологически не связан с остальным кодом. Между </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>begin</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> и </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>end</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> нужно вставить только одно слово: </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Close</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Это вызов специального метода формы,
который приводит к завершению приложения. Вы можете заставить Вашу форму
реагировать и на комбинацию клавиш &lt;</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Alt</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>&gt; &lt;</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>C</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>&gt;, например. Для этого достаточно в
Инспекторе Объектов отредактировать свойство </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Caption</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> кнопки </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>CloseBtn</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> следующим образом: &amp;</span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Close</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Теперь буква </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>C</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> в заголовке кнопки стала подчеркнутой,
что означает возможность применить указанную выше комбинацию клавиш вместо
щелчка мышкой. Вы можете поставить знак амперсанта перед любой буквой (не
обязательно первой). Соответственно, она окажется подчеркнутой, и будет
альтернативой щелчку мыши в комбинации с клавишей &lt;</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Alt</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>&gt;. Это же верно и для русских букв,
просто нужно следить за переключениями с русского <span class=GramE>на</span>
английский и наоборот.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Компонент </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>ColorGrid</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> является сеткой из 16 небольших
разноцветных квадратов. Когда Вы размещаете ее на форме, Вы можете видеть в
черном квадрате (в левом верхнем углу) буквы </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>F</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> и </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>B</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Они означают, что в данный момент
цвет фона (</span><span class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>BackGround</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>)
и цвет переднего плана (</span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>ForeGround</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>) установлены в черный цвет. В Инспекторе
Объектов это отражается следующим образом: свойства </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>BackGroundIndex</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> и </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>ForeGroundIndex</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
установлены в 0. <span class=GramE>Шестнадцать клеточек <span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>ColorGrid</span></span> имеют номера
от 0 до 15, причем это никак не связано с реальными “номерами” цветов с точки
зрения <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span> (<span
lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span> оперирует с цветовой
моделью <span lang=EN-US style='mso-ansi-language:EN-US'>RGB</span>, в которой
каждый цвет считается комбинацией красного, зеленого и голубого.</span> <span
class=GramE>“Концентрация” каждого из этих цветов выражается целым числом от 0
до 255).</span> Во время выполнения щелчок левой клавишей мыши по некоторой
клетке приводит к изменению цвета переднего плана, а щелчок правой клавишей – к
изменению цвета фона. В нашем случае цветом фона мы будем полагать цвет канвы,
а цветом переднего плана – цвет пера.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Компонент </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, как мы уже говорили, является
простейшей надстройкой над свойством </span><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
EN-US'>Canvas</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'> формы.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-style:normal'> </span></b><span
style='mso-spacerun:yes'> </span>Компонент <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>PaintBox</span></span> не умеет показывать свои
границы, поэтому, если Вы хотите точно знать, где заканчивается область,
доступная для рисования, следует поместить <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>PaintBox</span></span> внутрь компонента <span
lang=EN-US style='mso-ansi-language:EN-US'>Bevel</span>. Этот компонент
находится на странице <span lang=EN-US style='mso-ansi-language:EN-US'>Additional</span>
Палитры Компонентов и является просто рамкой. Используйте пункт контекстного
меню <span lang=EN-US style='mso-ansi-language:EN-US'>Send</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>To</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>Back</span>,
чтобы компонент <span lang=EN-US style='mso-ansi-language:EN-US'>Bevel</span>
оказался позади <span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>PaintBox</span></span>.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Простейшим способом рисования на канве является
использование методов </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>LineTo</span></span>(<span lang=EN-US
style='mso-ansi-language:EN-US'>X</span>, <span lang=EN-US style='mso-ansi-language:
EN-US'>Y</span>)<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'> и </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>MoveTo</span></span>(<span lang=EN-US
style='mso-ansi-language:EN-US'>X</span>, <span lang=EN-US style='mso-ansi-language:
EN-US'>Y</span>)<span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>. Первый из них рисует линию от данной точки до точки с
координатами (</span><span lang=EN-US style='mso-ansi-language:EN-US'>X</span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>Y</span>)<span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Второй перемещает курсор к точке (</span><span lang=EN-US style='mso-ansi-language:
EN-US'>X</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>Y</span>) <span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>без
рисования. Единственной задачей остается определить, когда следует проводить
линию при перемещении мыши, а когда – нет.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>В разделе публичных объявлений класса формы объявите поле </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>isDraw</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
типа </span><span lang=EN-US style='mso-ansi-language:EN-US'>Boolean</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Если его значение будет истинным, то мышь будет оставлять за собой след. Теперь
создайте обработчики трех событий компонента </span><span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>PaintBox</span></span>: <span
class=SpellE>OnMouseDown</span>, <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>OnMouseUp</span></span><span lang=EN-US> </span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>и
</span><span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>OnMouseMove</span></span>.
</p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-style:normal'> </span></b>События <span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>OnMouseDown</span></span> и <span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>OnMouseUp</span></span>
происходят, когда пользователь нажимает на клавишу мыши и отпускает ее
соответственно. Событие <span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>OnMouseMove</span></span> происходит при перемещении мыши. Все три
события позволяют проследить, какая из клавиш мыши была нажата. Кроме того,
есть возможность использовать клавиши мыши в комбинации с системными клавишами,
такими, как <span lang=EN-US style='mso-ansi-language:EN-US'>Shift</span>, <span
lang=EN-US style='mso-ansi-language:EN-US'>Alt</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>Ctrl</span>.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Первые два будут иметь одинаковый и очень короткий код: <o:p></o:p></span></p>

<p class=DCode><span class=SpellE><span class=GramE><span lang=EN-US>isDraw</span></span></span><span
style='mso-ansi-language:RU'> := </span><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>not</span></b><span lang=EN-US style='mso-ansi-language:RU'> </span><span
class=SpellE><span lang=EN-US>isDraw</span></span><span style='mso-ansi-language:
RU'>;<o:p></o:p></span></p>

<p class=DText><span class=GramE><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>приводящий</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
к изменению статуса мыши как инструмента рисования. При перемещении мыши этот
статус анализируется и в зависимости от результата либо проводится линия, либо
мышь перемещается, не оставляя за собой следа:<o:p></o:p></span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>if</span></b></span><span lang=EN-US> <span class=SpellE>isDraw</span>
<b style='mso-bidi-font-weight:normal'>then</b> PaintBox1.Canvas.LineTo(X, Y)</span></p>

<p class=DCode><span lang=EN-US><span style='mso-tab-count:1'>    </span><span
style='mso-spacerun:yes'>      </span><span class=GramE><b style='mso-bidi-font-weight:
normal'>else</b></span> PaintBox1.Canvas.MoveTo(X, Y);</span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Теперь осталось задать правильный начальный статус мыши: она
не должна рисовать, пока пользователь этого не захочет. Следовательно, при
запуске приложения (создании формы), поле </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>isDraw</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> должно иметь значение </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>false</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Чтобы обеспечить это, допишите
соответствующую строчку <span class=GramE>в</span> <span class=GramE>обработчик</span>
события формы </span><span class=SpellE><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
EN-US'>OnCreate</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Сохраните и запустите свой проект. Вы можете попробовать
порисовать с помощью мышки.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Последний этап разработки нашего проекта заключается в
установлении связей между цветами сетки и цветами фона и пера Вашего рисунка.
Для этих целей можно использовать уже знакомые Вам события </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnClick</span></span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>или </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnChange</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Мы сейчас продемонстрируем реализацию
нужного нам поведения с помощью событий </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnChange</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> компонента </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>ColorGrid</span></span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>и </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnPaint</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> компонента </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Событие </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnPaint</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> происходит всякий раз, когда требуется
перерисовать компонент: например, после перекрытия его другими окнами или при
создании формы.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Изменить цвет пера очень просто: достаточно добавить <span
class=GramE>в</span> <span class=GramE>обработчик</span> события </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnChange</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
цветовой сетки следующую строчку: <o:p></o:p></span></p>

<p class=DCode><span class=GramE><span lang=EN-US>PaintBox1.Canvas.Pen.Color :</span></span><span
lang=EN-US>= ColorGrid1.ForeGroundColor;</span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Если сейчас Вы вновь откомпилируете и запустите на
выполнение Ваш проект, то обнаружите, что Вы можете выбрать, каким цветом
рисовать. Остается научить наш редактор изменять цвет фона рисунка. Проблема
состоит в том, что компонент </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> – “невидимка”. Простое присвоение его
свойству </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Color</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
значения ColorGrid1.Back</span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>G</span><span
class=SpellE><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>roundColor</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> не приведет к нужному результату.
Выход заключается в рисовании внутри </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>закрашенного прямоугольника того же размера, что и сам компонент-контейнер.
Для этого существует специальный метод канвы:<o:p></o:p></span></p>

<p class=DCode><span class=GramE><span lang=EN-US>Canvas</span><span
style='mso-ansi-language:RU'>.</span><span class=SpellE><span lang=EN-US>FillRect</span></span><span
style='mso-ansi-language:RU'>(</span></span><span class=SpellE><span
lang=EN-US>Rect</span></span><span style='mso-ansi-language:RU'> : </span><span
class=SpellE><span lang=EN-US>TRect</span></span><span style='mso-ansi-language:
RU'>);<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>который принимает единственный параметр типа прямоугольника </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>TRect</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(этот тип мы описывали в главе 3). Для удобства введем в определение класса
формы еще одно поле </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>BackRect</span></span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>типа </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>TRect</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Этот прямоугольник будет иметь те же
размеры и расположение, что и компонент </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Дополните обработчик события </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnCreate</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
формы строчками, устанавливающими для поля </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>BackRect</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> нужное значение.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-style:normal'> </span></b>На самом деле нет большой разницы, будете
ли Вы рисовать этот прямоугольник на канве <span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>PaintBox</span></span> или непосредственно на
канве формы. Если Вы используете канву компонента <span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>PaintBox</span></span>, то Вы
работаете с относительной системой координат, что несколько упрощает дело.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Прямоугольник закрашивается цветом, установленным для кисти.
Это означает, что для достижения нужного результата следует перед вызовом
метода </span><span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>FillRect</span></span><span lang=EN-US> </span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>сменить цвет
кисти, т.е., дополнить обработчик события </span><span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>OnChange</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
цветовой сетки:<o:p></o:p></span></p>

<p class=DCode><span lang=EN-US>PaintBox1.Canvas.Brush.Color:=ColorGrid1.BackgroundColor;</span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Если вызвать метод рисования закрашенного прямоугольника в
этом же обработчике событий, то это лишит Вас возможности провести несколько
разноцветных линий. При каждом изменении цвета фона или цвета пера
прямоугольник будет перерисовываться, а Ваши линии – затираться. Кроме этого,
Вы обнаружите еще один неприятный эффект: минимизируйте форму, а затем вновь
разверните ее. Исчезли не только Ваши линии, но и цветной прямоугольник. Чтобы
восстанавливать цвет фона, следует рисовать прямоугольник в рамках процедуры </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnPaint</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>:<o:p></o:p></span></p>

<p class=DCode><span class=SpellE><span class=GramE><span lang=EN-US>PaintBox</span></span></span><span
class=GramE><span style='mso-ansi-language:RU'>1.</span><span lang=EN-US>Canvas</span><span
style='mso-ansi-language:RU'>.</span><span class=SpellE><span lang=EN-US>FillRect</span></span><span
style='mso-ansi-language:RU'>(</span></span><span class=SpellE><span
lang=EN-US>BackRect</span></span><span style='mso-ansi-language:RU'>);<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>а чтобы корректно установить “начальные значения” цветов,
дополнить обработчик события </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnCreate</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> (формы):<o:p></o:p></span></p>

<p class=DCode><span class=GramE><span lang=EN-US>PaintBox1.Canvas.Pen.Color :</span></span><span
lang=EN-US>= ColorGrid1.ForeGroundColor;</span></p>

<p class=DCode><span lang=EN-US>PaintBox1.Canvas.Brush.Color:=ColorGrid1.BackGroundColor;</span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Теперь нет проблем с восстановлением цвета фона после
минимизации формы, хотя он не меняется при выборе нового цвета фона с помощью
цветовой сетки. Следовательно, наша задача – обеспечить перерисовывание формы,
только если выбран новый цвет фона. Придется каждый раз анализировать, менялся
ли цвет фона. Вы можете написать условный оператор, сравнивающий имеющийся и
выбранный цвета. Другой путь состоит в использовании события цветовой сетки </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnMouseUp</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
В качестве одного из параметров обработчика этого события фигурирует </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Button</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> типа </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>TMouseButton</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>. Указанный тип
является перечислимым типом и определен следующим образом:<o:p></o:p></span></p>

<p class=DCode><span class=SpellE><span lang=EN-US>TMouseButton</span></span><span
style='mso-ansi-language:RU'> = (</span><span class=SpellE><span lang=EN-US>mbLeft</span></span><span
style='mso-ansi-language:RU'>, </span><span class=SpellE><span lang=EN-US>mbRight</span></span><span
style='mso-ansi-language:RU'>, </span><span class=SpellE><span lang=EN-US>mbMiddle</span></span><span
style='mso-ansi-language:RU'>);<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Параметр </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Button</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
позволяет проследить, какая именно клавиша мыши – левая, правая или средняя
была нажата. Дополните обработчик события </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnMouseDown</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'> цветовой сетки
следующей строкой:<o:p></o:p></span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>if</span></b></span><span lang=EN-US style='mso-ansi-language:RU'> </span><span
lang=EN-US>Button</span><span style='mso-ansi-language:RU'> = </span><span
class=SpellE><span lang=EN-US>mbRight</span></span><span lang=EN-US
style='mso-ansi-language:RU'> </span><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>then</span></b><span lang=EN-US style='mso-ansi-language:RU'> </span><span
class=SpellE><span lang=EN-US>PaintBox</span></span><span style='mso-ansi-language:
RU'>1</span><span lang=EN-US>Paint</span><span style='mso-ansi-language:RU'>(</span><span
lang=EN-US>sender</span><span style='mso-ansi-language:RU'>);<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>которая приведет к перерисовке <span class=SpellE>PaintBox</span>,
если была нажата правая клавиша мыши (т.е., пользователь выбирал цвет фона).
Сохраните, откомпилируйте и запустите Ваш проект на выполнение. Теперь Вы
можете рисовать разными цветами на выбранном Вами фоне. Выбор нового цвета фона
стирает Ваш рисунок и предлагает Вам “чистый лист” выбранного цвета.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Единственный компонент, для которого мы пока не написали
никакого кода – кнопка </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>ClearBtn</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>. Она должна очищать область рисования
и закрашивать ее выбранным на данный момент цветом фона. Создайте обработчик
события </span><span class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>OnClick</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
для этой кнопки. Вы можете вызвать в нем метод </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>1</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Paint</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, как описано выше, а можете обратиться
к процедуре </span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Refresh</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(без параметров), которая также приводит к перерисовке формы.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Конечно, этот графический редактор не обладает многими
полезными функциями: Вы не можете загрузить в него файл или же сохранить в виде
файла Ваш рисунок. Словом, встроенный в </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Windows</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> редактор </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Paint</span><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> </span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>куда мощнее. Однако<span class=GramE>,</span>
Вы можете дополнить Ваш редактор панелями инструментов и обеспечить сохранение
и загрузку файлов. Кроме того, Вы можете наделить его специфическими, нужными
только Вам возможностями. </span><st1:place><span class=GramE><span lang=EN-US
 style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
 mso-ansi-language:EN-US'>Delphi</span></span></st1:place><span class=GramE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>предоставляет Вам все средства для этого.</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Следующий проект, который мы разработаем, связан с
построением графиков функций (в математическом смысле этого слова). Ради
простоты мы рассмотрим случай, когда функция задана аналитически. В реальных
задачах Вам, вероятно, придется, к примеру, численно решать системы уравнений и
строить их решения (в том числе и в пространстве). Подобная задача усложняется
тем, что Вы должны будете сохранять каким-то образом данные численного расчета.
Для этих целей подходят динамические массивы или же списки типа </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>TList</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(мы подробнее рассмотрим их в одной из следующих глав). В </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Delphi</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> 1.0 нельзя работать с динамическими
массивами, а также существует ограничение на емкость списка </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>TList</span></span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>– не более 16380 элементов. Поэтому может возникнуть
необходимость создать свои собственные динамические структуры данных.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Рассмотрим в качестве примера построение параболы, заданной
уравнением<o:p></o:p></span></p>

<p class=DText><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Y</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
= </span><span lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman";mso-ansi-language:EN-US'>Ax</span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>^2 + </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>Bx</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
+ </span><span lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman";mso-ansi-language:EN-US'>C</span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>. <o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>В этом проекте пояснения даны не так детально, как в
предыдущем. Поместите на форму компонент </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>PaintBox</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, три кнопки (</span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>DoneBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
</span><span class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>ClearBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>,
</span><span class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>CloseBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>),
а также по пять меток и элементов редактирования (</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>A</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>CoefEdit</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>B</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>CoefEdit</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>C</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>CoefEdit</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>MinEdit</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>MaxEdit</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>). Их назначение понятно из названия.
Дополните объявление типа формы полями </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>A</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>B</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>C</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Min</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>_</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Max</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, </span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, а также функцией </span><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>Y</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>(</span><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>X</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>). В разделе реализации напишите код,
согласно которому вычисляется функция </span><span lang=EN-US style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";mso-ansi-language:
EN-US'>Y</span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>:<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=DCode><span lang=EN-US>TForm1.Y(<span class=GramE>X :</span> Real) :
Real;</span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>begin</span></b></span><b style='mso-bidi-font-weight:normal'><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=DCode><span lang=EN-US><span style='mso-spacerun:yes'> </span><span
class=GramE>result</span> := A * X * X + B * X + C;</span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>end</span></b></span><b style='mso-bidi-font-weight:normal'><span
style='mso-ansi-language:RU'>;</span></b><span style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=SComm><span style='font-size:18.0pt;mso-bidi-font-size:10.0pt;
font-family:Wingdings;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>&uuml;</span></span><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-style:normal'> </span></u><b
style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Примечание</span></u></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt'>.</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-style:normal'> </span></b><span style='mso-spacerun:yes'> </span>Переменная
<span class=SpellE>result</span> фактически является встроенной переменной для
любой функции. Значение, которое Вы присвоите этой переменной, и будет
возвращено функцией.<o:p></o:p></p>

<p class=DText><o:p>&nbsp;</o:p></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Создайте обработчик события – щелчка на кнопке </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>DoneBtn</span></span><span
lang=EN-US> </span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>левой клавишей мыши, который принимает значения
коэффициентов </span><span lang=EN-US style='mso-ansi-language:EN-US'>A</span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>B</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>C</span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'>, а также минимальное и максимальное
значения </span><span lang=EN-US style='mso-ansi-language:EN-US'>X</span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
(т.е. записывает их в соответствующие поля формы). Кнопки </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>ClearBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
и </span><span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>CloseBtn</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>
служат для тех же целей, что и в проекте № 9, и Вы можете скопировать
обработчики событий для них из этого проекта.<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Код, который собственно и рисует параболу, мы разместим в
обработчике события </span><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>OnPaint</span></span><span style='font-family:
"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>. Объявим
локальные переменные: </span><span lang=EN-US style='mso-ansi-language:EN-US'>h</span><span
lang=EN-US> </span><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>– шаг вычислений, </span><span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>i</span></span><span lang=EN-US> </span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>–счетчик.
Тогда основная часть кода будет выглядеть так:<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=DCode><span class=GramE><span lang=EN-US>h</span></span><span
lang=EN-US> := (<span class=SpellE>X_Max</span> – <span class=SpellE>X_Min</span>)
/ 1000;</span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>for</span></b></span><span lang=EN-US> <span class=SpellE>i</span>:=
0 <b style='mso-bidi-font-weight:normal'>to</b> 1000 <b style='mso-bidi-font-weight:
normal'>do</b> </span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>begin</span></b></span></p>

<p class=DCode><span lang=EN-US><span style='mso-tab-count:1'>    </span><span
class=GramE>PaintBox1.Canvas.LineTo(</span>Round(x), Round(y(x)));</span></p>

<p class=DCode><span lang=EN-US><span style='mso-tab-count:1'>    </span><span
class=GramE>x</span></span><span style='mso-ansi-language:RU'> := </span><span
lang=EN-US>x</span><span style='mso-ansi-language:RU'> + </span><span
lang=EN-US>h</span><span style='mso-ansi-language:RU'>;<o:p></o:p></span></p>

<p class=DCode><span class=GramE><b style='mso-bidi-font-weight:normal'><span
lang=EN-US>end</span></b></span><span style='mso-ansi-language:RU'>;<o:p></o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=DText><span style='font-family:"Times New Roman CYR";mso-bidi-font-family:
"Times New Roman"'>Метод </span><span class=SpellE><span lang=EN-US
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>OnPaint</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> <span class=GramE>следует вызывать
сразу же после принятия новых значений для коэффициентов и границ Х. Недостаток
этого кода Вы увидите</span>, как только запустите Ваш проект на выполнение.
Нарисованная парабола соединена с левым верхним углом компонента </span><span
class=SpellE><span lang=EN-US style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US'>PaintBox</span></span><span
style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman"'>.
Чтобы избежать этого, используйте метод </span><span class=SpellE><span
lang=EN-US style='font-family:"Times New Roman CYR";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-US'>MoveTo</span></span><span style='font-family:"Times New Roman CYR";
mso-bidi-font-family:"Times New Roman"'> для установки курсора в начальное
положение.<o:p></o:p></span></p>

<p class=DText>Чтобы приложение имело завершенный вид, его следует дополнить
осями или сеткой координат. Кроме того, следует масштабировать <span
lang=EN-US style='mso-ansi-language:EN-US'>x</span><span lang=EN-US> </span>и <span
lang=EN-US style='mso-ansi-language:EN-US'>y</span> так, чтобы они не
“вылезали” за границы отведенной для рисования области. Если Вам потребуется
строить несколько графиков в рамках одного рисунка, есть смысл позаботиться о
том, чтобы выделять их разным цветом. </p>

</div>

</body>

</html>
